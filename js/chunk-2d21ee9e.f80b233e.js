(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d21ee9e"],{d81e:function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("CCard",{staticClass:"p-1"},[s("CCardBody",[s("h4",{staticStyle:{color:"#8c5c7d"}},[s("CIcon",{attrs:{name:"cil-list",size:"lg"}}),t._v(" 異常紀錄")],1),s("hr",{staticClass:"mt-0 mb-4"}),s("CRow",[s("CCol",{attrs:{md:"3",sm:"12"}},[s("div",{staticClass:"form-group row"},[s("label",{staticClass:"col-sm-3 col-form-label text-center"},[t._v("設備:")]),s("div",{staticClass:"col-sm-8"},[s("multiselect",{attrs:{options:t.optionsEquip,label:"name",selectLabel:"選取",deselectLabel:"取消",placeholder:"請選擇設備"},model:{value:t.selectedEquip,callback:function(e){t.selectedEquip=e},expression:"selectedEquip"}})],1)])]),s("CCol",{attrs:{md:"5",sm:"12"}},[s("div",{staticClass:"form-group row"},[s("label",{staticClass:"col-sm-3 col-form-label text-center"},[t._v("時間區間:")]),s("div",{staticClass:"col-sm-9 pt-1"},[s("flat-pickr",{attrs:{config:t.config1},model:{value:t.startTime,callback:function(e){t.startTime=e},expression:"startTime"}}),s("strong",[t._v(" ~ ")]),s("flat-pickr",{attrs:{config:t.config2},model:{value:t.endTime,callback:function(e){t.endTime=e},expression:"endTime"}})],1)])]),s("CCol",{attrs:{md:"2"}},[s("CButton",{staticClass:"mr-2 mb-4",attrs:{color:"info"},on:{click:t.queryData}},[t._v("查詢")])],1)],1),s("CRow",[s("CCol",[s("h6",{staticClass:"float-right"},[t._v("資料筆數: "),s("CBadge",{attrs:{color:"warning"}},[t._v(t._s(t.items.length))])],1)])],1),s("CDataTable",{staticClass:"text-center",attrs:{hover:t.hover,striped:t.striped,bordered:t.bordered,small:t.small,fixed:t.fixed,items:t.items,fields:t.fields,"items-per-page":t.small?20:50,dark:t.dark,border:"",pagination:""},scopedSlots:t._u([{key:"no-items-view",fn:function(){return[s("br"),s("h5",[t._v(" 無資料 ")]),s("br")]},proxy:!0},{key:"time",fn:function(e){var i=e.item;return[s("td",[t._v(" "+t._s(t.formatTime(i.time))+" ")])]}},{key:"action",fn:function(t){t.item;return[s("td")]}}])})],1)],1)],1)},a=[],r=s("c38f"),n=s.n(r),l=(s("0952"),s("8e1f"),{components:{flatPickr:n.a},data:function(){return{startTime:null,endTime:null,config1:{enableTime:!0,dateFormat:"Y-m-d H:i",time_24hr:!0,defaultHour:0,defaultMinute:0},config2:{enableTime:!0,dateFormat:"Y-m-d H:i",time_24hr:!0,defaultHour:0,defaultMinute:0},role:"",optionsEquip:[],selectedEquip:null,items:[],fields:[{key:"index",label:"項次",_style:"background:#FFFFF1"},{key:"time",label:"時間",_style:"background:#FFFFF1"},{key:"pos",label:"點位",_style:"background:#FFFFF1"},{key:"msg",label:"異常訊息",_style:"background:#FFFFF1"}],hover:!0,striped:!0,bordered:!0,small:!1,fixed:!0,dark:!1}},created:function(){var t=this;this.role=sessionStorage.getItem("ROLE"),this.$http.get("/api/Equipments").then((function(e){t.optionsEquip=e.data}))},mounted:function(){},methods:{formatTime:function(t){if(!t)return"";var e=String(t);return e.substr(0,4)+"/"+e.substr(4,2)+"/"+e.substr(6,2)+" "+e.substr(8,2)+":"+e.substr(10,2)+":"+e.substr(12,2)},queryData:function(){var t=this;if(this.startTime&&this.endTime){var e=this.startTime.substr(0,4)+this.startTime.substr(5,2)+this.startTime.substr(8,2)+this.startTime.substr(11,2)+this.startTime.substr(14,2)+"00",s=this.endTime.substr(0,4)+this.endTime.substr(5,2)+this.endTime.substr(8,2)+this.endTime.substr(11,2)+this.endTime.substr(14,2)+"00";this.$http.get("/api/".concat(this.selectedEquip.type,"/").concat(this.selectedEquip.mac,"/").concat(e,"/").concat(s)).then((function(e){t.items=[];for(var s=0;s<e.data.length;s++){var i=e.data[s].arrError;i.forEach((function(e){t.items.push(e)}))}t.items.forEach((function(t,e){t.index=e+1}))})).catch((function(t){return console.log(t.response.data.message)}))}else alert("請選擇要查詢的時間區間!")}}}),o=l,c=s("2877"),d=Object(c["a"])(o,i,a,!1,null,"b48d54d2",null);e["default"]=d.exports}}]);
//# sourceMappingURL=chunk-2d21ee9e.f80b233e.js.map