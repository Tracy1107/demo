(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c66d9d8e"],{3690:function(t,a,r){},"4a55":function(t,a,r){"use strict";var e=r("db2c"),s=r.n(e);s.a},9427:function(t,a,r){"use strict";var e=r("3690"),s=r.n(e);s.a},a31d:function(t,a,r){"use strict";r.r(a);var e=function(){var t=this,a=t.$createElement,r=t._self._c||a;return r("div",{staticClass:"p-1"},[r("CCard",[r("CCardBody",{staticClass:"p-2"},[r("CHeaderNav",{staticClass:"d-md-down-none mr-auto"},[r("CHeaderNavItem",{staticClass:"d-md-down-none ml-4"},[r("h3",[r("CBadge",{attrs:{color:"warning"}},[t._v(t._s(t.$store.state.equip_name))]),t._v(" "),r("font-awesome-icon",{staticClass:"pt-1",attrs:{icon:"angle-double-right"}})],1)]),r("CHeaderNavItem",{staticClass:"d-md-down-none mx-1"},[0==t.status?r("h3",{staticClass:"blink_me"},[r("CBadge",{attrs:{color:"success"}},[t._v("啟動")])],1):1==t.status?r("h3",{staticClass:"blink_me"},[r("CBadge",{attrs:{color:"warning"}},[t._v("停機")])],1):r("h3",{staticClass:"blink_me"},[r("CBadge",{attrs:{color:"secondary"}},[t._v("無資料")])],1)]),t._l(t.arrErrMsg,(function(a){return r("CHeaderNavItem",{key:a.id,staticClass:"d-md-down-none mx-1"},[r("h3",{staticClass:"blink_me"},[r("CBadge",{attrs:{color:"danger"}},[t._v(t._s(a))])],1)])}))],2),r("hr",{staticClass:"mt-0 mb-2"}),r("DashDrawing",{attrs:{mac:t.$route.params.mac},on:{getStatus:t.getStatus}})],1)],1)],1)},s=[],n=function(){var t=this,a=t.$createElement,r=t._self._c||a;return r("div",[r("CRow",{attrs:{gutters:!1}},[r("CCol",{attrs:{md:"12"}},[r("CCard",{staticClass:"mb-1 mr-1 cardstyle"},[r("CCardBody",[r("CRow",[r("CCol",{staticClass:"mb-0",attrs:{sm:"8"}},[r("h4",{staticClass:"card-title mb-1",attrs:{id:"traffic"}},[t._v("目前速度")])]),r("CCol",{staticClass:"d-none d-md-block text-center",attrs:{sm:"4"}})],1),t.loaded?r("LineChart",{ref:"lineChart",staticStyle:{height:"400px"},attrs:{data:t.chartData}}):t._e()],1),r("CCardFooter",{staticStyle:{background:"#DFFEFF"}},[r("CRow",{staticClass:"text-center"},[r("CCol",{staticClass:"mb-sm-2 mb-0",attrs:{md:"4",sm:"12"}},[r("h5",[t._v("設定速度")]),r("h5",{staticStyle:{color:"#115756"}},[t._v(t._s(t.setSpeed))])]),r("CCol",{staticClass:"mb-sm-2 mb-0",attrs:{md:"4",sm:"12"}},[r("h5",[t._v("目前速度")]),r("h5",{staticStyle:{color:"#115756"}},[t._v(t._s(t.currentSpeed))])]),r("CCol",{staticClass:"mb-sm-2 mb-0",attrs:{md:"4",sm:"12"}},[r("h5",[t._v("目前米數")]),r("h5",{staticStyle:{color:"#115756"}},[t._v(t._s(t.meters))])])],1)],1)],1)],1)],1),r("CRow",{attrs:{gutters:!1}},[r("CCol",{attrs:{md:"12",sm:"12"}},[r("CCard",{staticClass:"mr-1 mb-1 h-100 cardstyle"},[r("CCardBody",[r("MainTable",{staticClass:"mx-1 my-1 h-100 text-center",attrs:{items:t.arrErrMsg,bordered:"",small:"",caption:"異常紀錄"}})],1)],1)],1)],1)],1)},i=[],o=r("7baa"),c=r("9c8b"),d=r("91f7"),l=r("90b9");function h(t){return C(t)||m(t)||u()}function u(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function m(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function C(t){if(Array.isArray(t)){for(var a=0,r=new Array(t.length);a<t.length;a++)r[a]=t[a];return r}}var p={name:"Dashboard",props:["mac"],components:{MainChart:o["a"],MainTable:c["a"],LineChart:d["a"]},data:function(){return{timer:null,setSpeed:"",currentSpeed:"",meters:"",status:0,arrLiveErrMsg:[],arrErrMsg:[],arrSpeed:[],arrSetSpeed:[],arrMeters:[],arrTime:[],arrLabel:[],height:400,chartData:null,loaded:!1}},computed:{myStyles:function(){return{height:"".concat(this.height,"px")}}},created:function(){var t=this;this.initGetTodayData(),this.timer=setInterval((function(){t.$http.get("/api/DrawingLastData/".concat(t.mac)).then((function(a){if(a.data.length>0){t.setSpeed=a.data[0].R120,t.currentSpeed=a.data[0].R130,t.meters=a.data[0].R110,t.status=a.data[0].M666;var r=a.data[0].arrError;a.data[0].time>Math.max.apply(Math,h(t.arrTime))&&(t.arrSpeed.push(a.data[0].R130),t.arrSetSpeed.push(a.data[0].R120),t.arrMeters.push(a.data[0].R110),t.arrTime.push(a.data[0].time),t.arrLabel.push(Object(l["a"])(a.data[0].time)),t.$refs.lineChart.update(),r.forEach((function(a){t.arrErrMsg.push(a)}))),t.arrLiveErrMsg=[];for(var e=0;e<r.length;e++)t.arrLiveErrMsg.push(r[e].msg);t.$emit("getStatus",t.status,t.arrLiveErrMsg)}})).catch((function(t){return console.log(t.response.data.message)}))}),1e3)},beforeDestroy:function(){clearInterval(this.timer)},methods:{initGetTodayData:function(){var t=this;this.$http.get("/api/Drawing/".concat(this.mac,"/",20200427e6,"/",20200427235959)).then((function(a){t.loaded=!0,t.arrSpeed=[],t.arrSetSpeed=[],t.arrMeters=[],t.arrTime=[],t.arrLabel=[],t.arrErrMsg=[];for(var r=0;r<a.data.length;r++){t.arrSpeed.push(a.data[r].R130),t.arrSetSpeed.push(a.data[r].R120),t.arrMeters.push(a.data[r].R110),t.arrTime.push(a.data[r].time),t.arrLabel.push(Object(l["a"])(a.data[r].time));var e=a.data[r].arrError;e.forEach((function(a){t.arrErrMsg.push(a)}))}t.getChartData(),t.arrErrMsg.reverse()})).catch((function(t){return console.log("initGetTodayData(): ".concat(t))}))},getChartData:function(){this.chartData=Object.assign({}),this.$set(this.chartData,"labels",this.arrLabel),this.$set(this.chartData,"datasets",[]),this.chartData.datasets.push({label:"設定速度",data:this.arrSetSpeed,backgroundColor:"#f4eeff",borderColor:"#5c2a9d",borderWidth:2},{label:"目前速度",data:this.arrSpeed,backgroundColor:"#e4f9ff",borderColor:"#11cbd7",borderWidth:2})}}},g=p,b=(r("4a55"),r("2877")),f=Object(b["a"])(g,n,i,!1,null,"24aed31f",null),v=f.exports,S={components:{DashDrawing:v},data:function(){return{role:"",activetab:"1",status:0,arrErrMsg:[]}},created:function(){this.role=sessionStorage.getItem("ROLE")},mounted:function(){},methods:{getStatus:function(t,a){this.status=t,this.arrErrMsg=a}}},_=S,y=(r("9427"),Object(b["a"])(_,e,s,!1,null,"3bc73359",null));a["default"]=y.exports},db2c:function(t,a,r){}}]);
//# sourceMappingURL=chunk-c66d9d8e.b0c19714.js.map