(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0db20c96"],{"0280":function(t,a,r){"use strict";var s=r("d9da"),e=r.n(s);e.a},"51b4":function(t,a,r){"use strict";r.r(a);var s=function(){var t=this,a=t.$createElement,r=t._self._c||a;return r("div",{staticClass:"p-1"},[r("CCard",[r("CCardBody",{staticClass:"p-2"},[r("CHeaderNav",{staticClass:"d-md-down-none mr-auto"},[r("CHeaderNavItem",{staticClass:"d-md-down-none ml-4"},[r("h3",[r("CBadge",{attrs:{color:"warning"}},[t._v(t._s(t.$store.state.equip_name))]),t._v(" "),r("font-awesome-icon",{staticClass:"pt-1",attrs:{icon:"angle-double-right"}})],1)]),r("CHeaderNavItem",{staticClass:"d-md-down-none mx-1"},[0==t.status?r("h3",{staticClass:"blink_me"},[r("CBadge",{attrs:{color:"success"}},[t._v("啟動")])],1):1==t.status?r("h3",{staticClass:"blink_me"},[r("CBadge",{attrs:{color:"warning"}},[t._v("停機")])],1):r("h3",{staticClass:"blink_me"},[r("CBadge",{attrs:{color:"secondary"}},[t._v("無資料")])],1)]),t._l(t.arrErrMsg,(function(a){return r("CHeaderNavItem",{key:a.id,staticClass:"d-md-down-none mx-1"},[r("h3",{staticClass:"blink_me"},[r("CBadge",{attrs:{color:"danger"}},[t._v(t._s(a))])],1)])}))],2),r("hr",{staticClass:"mt-0 mb-2"}),r("DashSpooling",{attrs:{mac:t.$route.params.mac},on:{getStatus:t.getStatus}})],1)],1)],1)},e=[],n=function(){var t=this,a=t.$createElement,r=t._self._c||a;return r("div",[r("CRow",{attrs:{gutters:!1}},[r("CCol",{attrs:{md:"12"}},[r("CCard",{staticClass:"mb-1 mr-1 cardstyle"},[r("CCardBody",[r("CRow",[r("CCol",{staticClass:"mb-0",attrs:{sm:"8"}},[r("h4",{staticClass:"card-title mb-1",attrs:{id:"traffic"}},[t._v("減速提前值")])]),r("CCol",{staticClass:"d-none d-md-block text-center",attrs:{sm:"4"}})],1),t.loaded?r("LineChart",{ref:"lineChart",attrs:{styles:t.myStyles,data:t.chartData}}):t._e()],1),r("CCardFooter",{staticStyle:{background:"#DFFEFF"}},[r("CRow",{staticClass:"text-center"},[r("CCol",{staticClass:"mb-sm-2 mb-0",attrs:{md:"4",sm:"12"}},[r("h5",[t._v("捲取啟動")]),t.reeling?r("h5",[r("div",{staticClass:"stop"},[t._v("停止")])]):r("h5",[r("div",{staticClass:"run"},[t._v("啟動")])])]),r("CCol",{staticClass:"mb-sm-2 mb-0",attrs:{md:"4",sm:"12"}},[r("h5",[t._v("退線啟動")]),t.retreat?r("h5",[r("div",{staticClass:"stop"},[t._v("停止")])]):r("h5",[r("div",{staticClass:"run"},[t._v("啟動")])])]),r("CCol",{staticClass:"mb-sm-2 mb-0",attrs:{md:"4",sm:"12"}},[r("h5",[t._v("減速提前值")]),r("h5",{staticClass:"value"},[t._v(t._s(t.speed))])])],1)],1)],1)],1)],1),r("CRow",{attrs:{gutters:!1}},[r("CCol",{attrs:{md:"12",sm:"12"}},[r("CCard",{staticClass:"mr-1 mb-1 h-100 cardstyle"},[r("CCardBody",[r("MainTable",{staticClass:"mx-1 my-1 h-100 text-center",attrs:{items:t.arrErrMsg,bordered:"",small:"",caption:"異常紀錄"}})],1)],1)],1)],1)],1)},i=[],o=r("9c8b"),c=r("91f7"),l=r("90b9");function d(t){return u(t)||m(t)||h()}function h(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function m(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function u(t){if(Array.isArray(t)){for(var a=0,r=new Array(t.length);a<t.length;a++)r[a]=t[a];return r}}var C={name:"Dashboard",props:["mac"],components:{MainTable:o["a"],LineChart:c["a"]},data:function(){return{timer:null,reeling:0,retreat:0,speed:"",status:0,arrLiveErrMsg:[],arrErrMsg:[],arrSpeed:[],arrTime:[],arrLabel:[],height:400,chartData:null,loaded:!1}},computed:{myStyles:function(){return{height:"".concat(this.height,"px")}}},mounted:function(){var t=this;this.initGetTodayData(),this.timer=setInterval((function(){t.$http.get("/api/SpoolingLastData/".concat(t.mac)).then((function(a){if(a.data.length>0){t.reeling=a.data[0].CH6_10,t.retreat=a.data[0].CH6_09,t.speed=a.data[0].DM601;var r=a.data[0].arrError;a.data[0].time>Math.max.apply(Math,d(t.arrTime))&&(t.arrSpeed.push(a.data[0].DM601),t.arrTime.push(a.data[0].time),t.arrLabel.push(Object(l["a"])(a.data[0].time)),t.$refs.lineChart.update(),r.forEach((function(a){t.arrErrMsg.splice(0,0,a)}))),t.arrLiveErrMsg=[];for(var s=0;s<r.length;s++)t.arrLiveErrMsg.push(r[s].msg);t.$emit("getStatus",t.status,t.arrLiveErrMsg)}})).catch((function(t){return console.log(t.response.data.message)}))}),1e3)},beforeDestroy:function(){clearInterval(this.timer)},methods:{initGetTodayData:function(){var t=this;this.$http.get("/api/Spooling/".concat(this.mac,"/",2020052e7,"/",20200520235959)).then((function(a){t.loaded=!0,t.arrSpeed=[],t.arrTime=[],t.arrErrMsg=[],t.arrLabel=[];for(var r=0;r<a.data.length;r++){t.arrSpeed.push(a.data[r].DM601),t.arrTime.push(a.data[r].time),t.arrLabel.push(Object(l["a"])(a.data[r].time));var s=a.data[r].arrError;s.forEach((function(a){t.arrErrMsg.push(a)}))}t.getChartData(),t.arrErrMsg.reverse()})).catch((function(t){return console.log("initGetTodayData(): ".concat(t))}))},getChartData:function(){this.chartData=Object.assign({}),this.$set(this.chartData,"labels",this.arrLabel),this.$set(this.chartData,"datasets",[]),this.chartData.datasets.push({label:"減速提前值",data:this.arrSpeed,backgroundColor:"#e4f9ff",borderColor:"#11cbd7",borderWidth:2})}}},g=C,p=(r("0280"),r("2877")),b=Object(p["a"])(g,n,i,!1,null,"c9c9bb90",null),f=b.exports,v={components:{DashSpooling:f},data:function(){return{role:"",activetab:"1",status:0,arrErrMsg:[]}},created:function(){this.role=sessionStorage.getItem("ROLE")},mounted:function(){},methods:{getStatus:function(t,a){this.status=t,this.arrErrMsg=a}}},_=v,y=(r("5cfb"),Object(p["a"])(_,s,e,!1,null,"49350e4a",null));a["default"]=y.exports},"5cfb":function(t,a,r){"use strict";var s=r("87c7"),e=r.n(s);e.a},"87c7":function(t,a,r){},d9da:function(t,a,r){}}]);
//# sourceMappingURL=chunk-0db20c96.ea30ebde.js.map